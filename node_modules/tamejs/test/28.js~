
var n = 30;
var skip = 20;
var slots = {};


run = function (cb) {
    console.log ("3.tjs run");
    var i = 0;
    while (1) {
	slots[i] = 0;
	twait { setTimeout (mkevent (), 1); }
	i++;
	if (0 && i == skip) {
	    continue;
	}
	slots[i] = 1;
	
	if (i == n) {
	    console.log ("3.tjs run D");
	    break;
	}
    }
    console.log ("3.tjs done");
    cb ();
};
twait { run(mkevent()); }
