var n = 30;
var skip = 20;
var slots = {};
var assert = require ("assert");

var run = function (cb) {
    var i = 0;
    foo : while (1) {
	slots[i] = 0;
	twait { setTimeout (mkevent (), 1); }
	
	for (var j = 0; j < 10; j++) {
	    if (i == skip) {
		i++;
		continue foo;
	    }
	    slots[i] = 1;
	    i++;
	    if (i == n) {
		break foo;
	    }
	    break;
	}
    }
    cb ();
};

twait { run (mkevent ()); }
